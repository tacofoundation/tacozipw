import{_ as i,c as s,a2 as a,o as e}from"./chunks/framework.Dhu4FrKh.js";const c=JSON.parse('{"title":"Validation","description":"","frontmatter":{},"headers":[],"relativePath":"en/python/validation.md","filePath":"en/python/validation.md"}'),l={name:"en/python/validation.md"};function n(d,t,h,r,o,p){return e(),s("div",null,t[0]||(t[0]=[a(`<h1 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-label="Permalink to &quot;Validation&quot;">​</a></h1><p>Validates the integrity of a <code>tacozip</code> archive at different levels of depth.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tacozip.validate(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zip_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    level: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TACOZIP_VALIDATE_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">-&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> int</span></span></code></pre></div><h2 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h2><ul><li><code>zip_path</code> (str): The path to the ZIP file to validate.</li><li><code>level</code> (int, optional): The validation level to perform.</li><li><code>tacozip.TACOZIP_VALIDATE_QUICK</code>: (Level 0) Checks the TACO header only. Very fast.</li><li><code>tacozip.TACOZIP_VALIDATE_NORMAL</code>: (Level 1) Header checks + structure (EOCD, Central Directory).</li><li><code>tacozip.TACOZIP_VALIDATE_DEEP</code>: (Level 2) All previous checks + CRC32 validation (slower).</li></ul><h2 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h2><p>An integer status code.</p><ul><li><code>tacozip.TACOZ_VALID</code> (0): The file is valid.</li><li>Any other negative value (e.g., <code>TACOZ_INVALID_NO_TACO</code>): Indicates a specific validation error.</li></ul><h2 id="validation-levels" tabindex="-1">Validation Levels <a class="header-anchor" href="#validation-levels" aria-label="Permalink to &quot;Validation Levels&quot;">​</a></h2><p>You can choose how deep the validation should be:</p><ul><li><code>tacozip.TACOZIP_VALIDATE_QUICK</code> (0): Checks the TACO header signature only. This is the fastest.</li><li><code>tacozip.TACOZIP_VALIDATE_NORMAL</code> (1): Performs <code>QUICK</code> checks plus ZIP structural validation (EOCD, Central Directory).</li><li><code>tacozip.TACOZIP_VALIDATE_DEEP</code> (2): Performs <code>NORMAL</code> checks plus CRC32 validation on the Central Directory. This is the slowest but most thorough.</li></ul><h3 id="validation-return-codes" tabindex="-1">Validation Return Codes <a class="header-anchor" href="#validation-return-codes" aria-label="Permalink to &quot;Validation Return Codes&quot;">​</a></h3><p>The function returns an integer code. <code>TACOZ_VALID</code> (0) indicates success. Any other code indicates a problem.</p><table tabindex="0"><thead><tr><th style="text-align:left;">Return Code</th><th style="text-align:left;">Constant Name</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">0</td><td style="text-align:left;"><code>TACOZ_VALID</code></td><td style="text-align:left;">Valid TACO archive.</td></tr><tr><td style="text-align:left;">-10</td><td style="text-align:left;"><code>TACOZ_INVALID_NOT_ZIP</code></td><td style="text-align:left;">Not a ZIP file (missing LFH signature).</td></tr><tr><td style="text-align:left;">-11</td><td style="text-align:left;"><code>TACOZ_INVALID_NO_TACO</code></td><td style="text-align:left;">No <code>TACO_HEADER</code> at offset 0 (file modified by external tool).</td></tr><tr><td style="text-align:left;">-12</td><td style="text-align:left;"><code>TACOZ_INVALID_HEADER_SIZE</code></td><td style="text-align:left;">Invalid header size (corrupted).</td></tr><tr><td style="text-align:left;">-13</td><td style="text-align:left;"><code>TACOZ_INVALID_META_COUNT</code></td><td style="text-align:left;">Invalid metadata count (must be 0-7).</td></tr><tr><td style="text-align:left;">-14</td><td style="text-align:left;"><code>TACOZ_INVALID_FILE_SIZE</code></td><td style="text-align:left;">File too small to be a valid archive.</td></tr><tr><td style="text-align:left;">-20</td><td style="text-align:left;"><code>TACOZ_INVALID_NO_EOCD</code></td><td style="text-align:left;">No End of Central Directory record found.</td></tr><tr><td style="text-align:left;">-21</td><td style="text-align:left;"><code>TACOZ_INVALID_CD_OFFSET</code></td><td style="text-align:left;">Invalid Central Directory offset.</td></tr><tr><td style="text-align:left;">-22</td><td style="text-align:left;"><code>TACOZ_INVALID_NO_CD_ENTRY</code></td><td style="text-align:left;"><code>TACO_HEADER</code> not found in Central Directory.</td></tr><tr><td style="text-align:left;">-23</td><td style="text-align:left;"><code>TACOZ_INVALID_REORDERED</code></td><td style="text-align:left;">Archive entries reordered (CD doesn&#39;t point to offset 0).</td></tr><tr><td style="text-align:left;">-30</td><td style="text-align:left;"><code>TACOZ_INVALID_CRC_LFH</code></td><td style="text-align:left;">CRC32 mismatch in Local File Header.</td></tr><tr><td style="text-align:left;">-31</td><td style="text-align:left;"><code>TACOZ_INVALID_CRC_CD</code></td><td style="text-align:left;">CRC32 mismatch in Central Directory.</td></tr></tbody></table><h2 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># You can import the error messages for better debugging</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> VALIDATION_ERROR_MESSAGES</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">archive_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;my_archive.zip&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.validate(archive_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tacozip.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TACOZIP_VALIDATE_DEEP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TACOZ_VALID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">archive_path</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is valid.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> VALIDATION_ERROR_MESSAGES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.get(result, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Unknown validation error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Validation FAILED: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error_message</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> (Code: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div>`,16)]))}const E=i(l,[["render",n]]);export{c as __pageData,E as default};
