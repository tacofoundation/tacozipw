<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FAQ | tacozip</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/tacozip/assets/style.CvVj_Yy6.css" as="style">
    <link rel="preload stylesheet" href="/tacozip/vp-icons.css" as="style">
    
    <script type="module" src="/tacozip/assets/app.fiwHBN19.js"></script>
    <link rel="preload" href="/tacozip/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/tacozip/assets/chunks/theme.Bhlj7CDQ.js">
    <link rel="modulepreload" href="/tacozip/assets/chunks/framework.CtkhMaM1.js">
    <link rel="modulepreload" href="/tacozip/assets/en_python_faq.md.BJTaFUXI.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/tacozip/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>tacozip</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/tacozip/en/python/overview/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Python</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="#" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>R</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="#" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Julia</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tacofoundation/tacozip" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/isp_uv_es" aria-label="twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:csaybar@gamil.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tacofoundation/tacozip" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/isp_uv_es" aria-label="twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:csaybar@gamil.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>API Reference</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/overview.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/getting-started.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Getting started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/header.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>TACO header</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/client.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Python client</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/python-api-reference.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Python API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/use-cases.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Use cases</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/faq.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>FAQ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/CHANGELOG.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Changelog</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tacozip/en/python/CONTRIBUTING.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Contributing</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _tacozip_en_python_faq" data-v-39a288b8><div><h1 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h1><p>Frequently asked questions about tacozip.</p><h2 id="general" tabindex="-1">General <a class="header-anchor" href="#general" aria-label="Permalink to &quot;General&quot;">​</a></h2><h3 id="what-is-tacozip" tabindex="-1">What is tacozip? <a class="header-anchor" href="#what-is-tacozip" aria-label="Permalink to &quot;What is tacozip?&quot;">​</a></h3><p>Tacozip is a specialized ZIP library that adds a 165-byte metadata header at the beginning of ZIP archives. This enables single-request metadata retrieval - crucial for cloud storage scenarios where you need to know what&#39;s in an archive before downloading gigabytes of data.</p><h3 id="when-should-i-use-tacozip-vs-regular-zip" tabindex="-1">When should I use tacozip vs regular ZIP? <a class="header-anchor" href="#when-should-i-use-tacozip-vs-regular-zip" aria-label="Permalink to &quot;When should I use tacozip vs regular ZIP?&quot;">​</a></h3><p><strong>Use tacozip when:</strong></p><ul><li>Storing large files in cloud storage (S3, Azure, HTTP CDN)</li><li>Need to read only parts of files (Parquet row groups, tiles, chunks)</li><li>Accessing data over slow/expensive networks</li><li>Metadata needs to be readable without downloading entire archive</li></ul><p><strong>Use regular ZIP when:</strong></p><ul><li>❌ Files stored on local filesystem only</li><li>❌ Always need to extract entire archive</li><li>❌ Compression ratio is critical (TACO uses STORE only)</li><li>❌ Need &gt;4GB archives (TACO doesn&#39;t support ZIP64)</li></ul><h3 id="is-tacozip-compatible-with-standard-zip-tools" tabindex="-1">Is tacozip compatible with standard ZIP tools? <a class="header-anchor" href="#is-tacozip-compatible-with-standard-zip-tools" aria-label="Permalink to &quot;Is tacozip compatible with standard ZIP tools?&quot;">​</a></h3><p>Yes! TACO archives ARE standard ZIP archives. You can:</p><ul><li>Open with WinZip, 7-Zip, unzip, etc.</li><li>Extract all files normally</li><li>View contents in file explorers</li></ul><p>However:</p><ul><li>⚠️ Modifying with standard tools will remove TACO header</li><li>⚠️ Standard tools won&#39;t show/use metadata entries</li></ul><h3 id="what-happens-if-i-modify-a-taco-archive-with-7-zip-winzip" tabindex="-1">What happens if I modify a TACO archive with 7-Zip/WinZip? <a class="header-anchor" href="#what-happens-if-i-modify-a-taco-archive-with-7-zip-winzip" aria-label="Permalink to &quot;What happens if I modify a TACO archive with 7-Zip/WinZip?&quot;">​</a></h3><p>The TACO header will be lost or corrupted. The archive becomes a regular ZIP file. Run <code>tacozip.validate()</code> to detect this:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validate, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TACOZ_INVALID_NO_TACO</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modified.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TACOZ_INVALID_NO_TACO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ERROR: Archive modified by external tool!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Recreate archive to restore TACO header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to &quot;Performance&quot;">​</a></h2><h3 id="what-s-the-performance-impact-of-store-compression" tabindex="-1">What&#39;s the performance impact of STORE compression? <a class="header-anchor" href="#what-s-the-performance-impact-of-store-compression" aria-label="Permalink to &quot;What&#39;s the performance impact of STORE compression?&quot;">​</a></h3><p><strong>Trade-offs:</strong></p><table tabindex="0"><thead><tr><th>Aspect</th><th>STORE (tacozip)</th><th>DEFLATE (regular ZIP)</th></tr></thead><tbody><tr><td>Archive size</td><td>Larger (no compression)</td><td>Smaller (compressed)</td></tr><tr><td>Read speed</td><td>Faster (no decompression)</td><td>Slower (must decompress)</td></tr><tr><td>HTTP range requests</td><td>Works perfectly</td><td>Doesn&#39;t work (compressed data)</td></tr><tr><td>CPU usage</td><td>Minimal</td><td>High (compression/decompression)</td></tr></tbody></table><p><strong>When STORE is better:</strong></p><ul><li>Cloud storage with fast network, slow CPU</li><li>Already-compressed data (JPEG, PNG, video, compressed Parquet)</li><li>Need random access to file segments</li></ul><p><strong>When DEFLATE is better:</strong></p><ul><li>Local storage (disk space limited)</li><li>Uncompressed source data (text files, CSV)</li><li>Always extracting full archive</li></ul><h3 id="how-fast-is-metadata-access" tabindex="-1">How fast is metadata access? <a class="header-anchor" href="#how-fast-is-metadata-access" aria-label="Permalink to &quot;How fast is metadata access?&quot;">​</a></h3><p><strong>Regular ZIP</strong> (without TACO):</p><ol><li>Seek to end of file (~50ms for S3 request)</li><li>Read End of Central Directory (~50ms)</li><li>Read Central Directory (~100ms for 1000 files)</li><li><strong>Total: ~200ms + file size dependent</strong></li></ol><p><strong>TACO</strong> (with tacozip):</p><ol><li>Read first 165 bytes (~50ms for S3 request)</li><li><strong>Total: ~50ms regardless of file size</strong></li></ol><p><strong>Speedup</strong>: ~4x faster for metadata, works on files from MB to GB.</p><h3 id="what-s-the-overhead-of-the-taco-header" tabindex="-1">What&#39;s the overhead of the TACO header? <a class="header-anchor" href="#what-s-the-overhead-of-the-taco-header" aria-label="Permalink to &quot;What&#39;s the overhead of the TACO header?&quot;">​</a></h3><p>165 bytes = 0.000165 MB</p><p>Impact on common file sizes:</p><ul><li>1 MB file: 0.016% overhead</li><li>100 MB file: 0.00017% overhead</li><li>1 GB file: 0.000016% overhead</li></ul><p><strong>Negligible overhead</strong> for any reasonably-sized file.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><h3 id="can-i-have-more-than-7-metadata-entries" tabindex="-1">Can I have more than 7 metadata entries? <a class="header-anchor" href="#can-i-have-more-than-7-metadata-entries" aria-label="Permalink to &quot;Can I have more than 7 metadata entries?&quot;">​</a></h3><p>No, maximum is 7 entries. This is a design constraint to keep header at 165 bytes.</p><p><strong>Workarounds:</strong></p><ol><li><strong>Group data</strong>: Instead of individual rows, store row group ranges</li><li><strong>Multiple archives</strong>: Split data across multiple TACO archives</li><li><strong>External metadata</strong>: Store additional metadata in separate file</li><li><strong>Hierarchical metadata</strong>: Each entry points to a chunk containing sub-metadata</li></ol><p>Example - hierarchical approach:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Entry 0: Points to metadata chunk</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Entry 1-6: Point to actual data chunks</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Read metadata chunk first</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">meta_offset, meta_length </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Metadata chunk contains detailed info about entries 1-6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Parse metadata to decide which data chunks to fetch</span></span></code></pre></div><h3 id="can-i-store-non-file-data-just-metadata" tabindex="-1">Can I store non-file data (just metadata)? <a class="header-anchor" href="#can-i-store-non-file-data-just-metadata" aria-label="Permalink to &quot;Can I store non-file data (just metadata)?&quot;">​</a></h3><p>Yes! Create an archive with a dummy file:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pathlib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create dummy file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Path(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dummy.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).write_text(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;metadata only&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create archive with your metadata</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tacozip.create(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;metadata.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    src_files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dummy.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    entries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Your actual metadata</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Users only need to read header (165 bytes)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># They never need to download dummy.txt</span></span></code></pre></div><h3 id="how-do-i-migrate-from-regular-zip-to-taco" tabindex="-1">How do I migrate from regular ZIP to TACO? <a class="header-anchor" href="#how-do-i-migrate-from-regular-zip-to-taco" aria-label="Permalink to &quot;How do I migrate from regular ZIP to TACO?&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zipfile</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pathlib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> migrate_to_taco</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(zip_path, taco_path):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;Convert regular ZIP to TACO archive.&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Extract regular ZIP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    extract_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./temp_extract&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    extract_dir.mkdir(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exist_ok</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zipfile.ZipFile(zip_path) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zf:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        zf.extractall(extract_dir)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Get all extracted files</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(extract_dir.glob(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(f) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.is_file()]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Create TACO archive</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tacozip.create(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        taco_path,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        src_files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">files,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        entries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add real metadata as needed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Cleanup</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> shutil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    shutil.rmtree(extract_dir)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Usage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">migrate_to_taco(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;old.zip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="can-i-update-files-in-a-taco-archive" tabindex="-1">Can I update files in a TACO archive? <a class="header-anchor" href="#can-i-update-files-in-a-taco-archive" aria-label="Permalink to &quot;Can I update files in a TACO archive?&quot;">​</a></h3><p><strong>Metadata</strong>: Yes, use <code>update_header()</code> - very fast (only ~200 bytes written)</p><p><strong>Files</strong>: No, file content cannot be updated in-place. You must:</p><ol><li>Extract archive</li><li>Modify files</li><li>Recreate archive</li></ol><p>This is a design trade-off for simplicity and STORE-only compression.</p><h2 id="cloud-storage" tabindex="-1">Cloud storage <a class="header-anchor" href="#cloud-storage" aria-label="Permalink to &quot;Cloud storage&quot;">​</a></h2><h3 id="which-cloud-providers-does-tacozip-work-with" tabindex="-1">Which cloud providers does tacozip work with? <a class="header-anchor" href="#which-cloud-providers-does-tacozip-work-with" aria-label="Permalink to &quot;Which cloud providers does tacozip work with?&quot;">​</a></h3><p>All major providers that support HTTP range requests:</p><ul><li>AWS S3</li><li>Google Cloud Storage</li><li>Azure Blob Storage</li><li>Cloudflare R2</li><li>DigitalOcean Spaces</li><li>Backblaze B2</li><li>Any HTTP CDN (CloudFlare, Fastly, Akamai)</li></ul><h3 id="do-i-need-special-s3-configuration" tabindex="-1">Do I need special S3 configuration? <a class="header-anchor" href="#do-i-need-special-s3-configuration" aria-label="Permalink to &quot;Do I need special S3 configuration?&quot;">​</a></h3><p>No special configuration needed. Standard S3 features:</p><ul><li>Range GET requests (standard S3 feature)</li><li>Public or private buckets (both work)</li><li>S3 Transfer Acceleration (compatible)</li><li>CloudFront CDN (compatible)</li></ul><h3 id="how-much-does-it-cost-to-read-metadata-from-s3" tabindex="-1">How much does it cost to read metadata from S3? <a class="header-anchor" href="#how-much-does-it-cost-to-read-metadata-from-s3" aria-label="Permalink to &quot;How much does it cost to read metadata from S3?&quot;">​</a></h3><p>AWS S3 pricing (as of 2024):</p><ul><li>GET request: $0.0004 per 1000 requests</li><li>Data transfer: $0.09 per GB</li></ul><p><strong>Reading TACO metadata:</strong></p><ul><li>1 GET request + 165 bytes = ~$0.0000004 per read</li><li><strong>Essentially free</strong> - reading metadata 1 million times costs ~$0.40</li></ul><p><strong>vs downloading 1GB file:</strong></p><ul><li>1 GET request + 1GB transfer = ~$0.09</li></ul><p><strong>Savings</strong>: Reading metadata is ~225,000x cheaper than downloading full file!</p><h3 id="can-i-use-tacozip-with-presigned-urls" tabindex="-1">Can I use tacozip with presigned URLs? <a class="header-anchor" href="#can-i-use-tacozip-with-presigned-urls" aria-label="Permalink to &quot;Can I use tacozip with presigned URLs?&quot;">​</a></h3><p>Yes! Presigned URLs work perfectly:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> boto3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> boto3.client(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;s3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate presigned URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s3.generate_presigned_url(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;get_object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    Params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Bucket&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-bucket&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data.taco&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    ExpiresIn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use with HTTP range request</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bytes=0-164&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(r.content)</span></span></code></pre></div><h2 id="errors-and-troubleshooting" tabindex="-1">Errors and troubleshooting <a class="header-anchor" href="#errors-and-troubleshooting" aria-label="Permalink to &quot;Errors and troubleshooting&quot;">​</a></h2><h3 id="native-library-not-found-error" tabindex="-1">&quot;Native library not found&quot; error <a class="header-anchor" href="#native-library-not-found-error" aria-label="Permalink to &quot;&quot;Native library not found&quot; error&quot;">​</a></h3><p><strong>Cause</strong>: The <code>.so</code>/<code>.dylib</code>/<code>.dll</code> file is missing from the package.</p><p><strong>Solutions:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Reinstall package</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force-reinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tacozip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If building from source, ensure library is built</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --preset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --preset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clients/python/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify installation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;import tacozip; tacozip.self_check()&quot;</span></span></code></pre></div><h3 id="buffer-too-small-error" tabindex="-1">&quot;Buffer too small&quot; error <a class="header-anchor" href="#buffer-too-small-error" aria-label="Permalink to &quot;&quot;Buffer too small&quot; error&quot;">​</a></h3><p><strong>Cause</strong>: Trying to read header from bytes buffer &lt; 157 bytes.</p><p><strong>Solution</strong>: Ensure you read at least 165 bytes (safe minimum):</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Wrong</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bytes=0-100&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ❌ Too small</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(r.content)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Correct</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bytes=0-164&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Minimum 165 bytes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(r.content)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Better (with margin)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bytes=0-199&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Extra margin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(r.content)</span></span></code></pre></div><h3 id="invalid-header-or-tacoz-invalid-no-taco-error" tabindex="-1">&quot;Invalid header&quot; or TACOZ_INVALID_NO_TACO error <a class="header-anchor" href="#invalid-header-or-tacoz-invalid-no-taco-error" aria-label="Permalink to &quot;&quot;Invalid header&quot; or TACOZ_INVALID_NO_TACO error&quot;">​</a></h3><p><strong>Cause</strong>: File was modified by standard ZIP tool, removing TACO header.</p><p><strong>Solution</strong>: Recreate archive from original files.</p><p><strong>Prevention</strong>: Don&#39;t modify TACO archives with 7-Zip/WinZip/unzip. Only read/extract.</p><h3 id="archive-too-large-tacoz-err-too-large" tabindex="-1">&quot;Archive too large&quot; (TACOZ_ERR_TOO_LARGE) <a class="header-anchor" href="#archive-too-large-tacoz-err-too-large" aria-label="Permalink to &quot;&quot;Archive too large&quot; (TACOZ_ERR_TOO_LARGE)&quot;">​</a></h3><p><strong>Cause</strong>: Archive exceeds 4GB limit (no ZIP64 support).</p><p><strong>Solutions:</strong></p><ol><li><strong>Split data</strong> across multiple archives</li><li><strong>Use regular ZIP</strong> for archives &gt;4GB</li><li><strong>Compress files</strong> before adding (outside of archive)</li></ol><h2 id="development" tabindex="-1">Development <a class="header-anchor" href="#development" aria-label="Permalink to &quot;Development&quot;">​</a></h2><h3 id="can-i-use-tacozip-with-multiprocessing-threads" tabindex="-1">Can I use tacozip with multiprocessing/threads? <a class="header-anchor" href="#can-i-use-tacozip-with-multiprocessing-threads" aria-label="Permalink to &quot;Can I use tacozip with multiprocessing/threads?&quot;">​</a></h3><p>Yes! The library is thread-safe for reading operations.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> concurrent.futures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadPoolExecutor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process_chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(offset, length):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        f.seek(offset)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read(length)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Process chunk...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Read metadata once</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tacozip.read_header(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data.taco&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Process chunks in parallel</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadPoolExecutor(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_workers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> executor:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    futures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        executor.submit(process_chunk, offset, length)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offset, length </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entries</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [f.result() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> futures]</span></span></code></pre></div><p><strong>Note</strong>: Write operations (create, update_header) should NOT be parallelized on the same archive.</p><h3 id="how-do-i-contribute-to-tacozip" tabindex="-1">How do I contribute to tacozip? <a class="header-anchor" href="#how-do-i-contribute-to-tacozip" aria-label="Permalink to &quot;How do I contribute to tacozip?&quot;">​</a></h3><p>See <a href="./CONTRIBUTING.html">Contributing Guidelines</a> for:</p><ul><li>Code style requirements</li><li>Testing requirements</li><li>PR process</li><li>Development setup</li></ul><h3 id="is-there-a-julia-r-javascript-client" tabindex="-1">Is there a Julia/R/JavaScript client? <a class="header-anchor" href="#is-there-a-julia-r-javascript-client" aria-label="Permalink to &quot;Is there a Julia/R/JavaScript client?&quot;">​</a></h3><p><strong>Current status:</strong></p><ul><li>Python client (official)</li><li>C library (official)</li><li>⏳ Julia client (planned)</li><li>⏳ R client (planned)</li><li>❌ JavaScript client (not planned)</li></ul><p>Community contributions welcome!</p><h2 id="still-have-questions" tabindex="-1">Still have questions? <a class="header-anchor" href="#still-have-questions" aria-label="Permalink to &quot;Still have questions?&quot;">​</a></h2><ul><li><strong>Documentation</strong>: Check <a href="./getting-started.html">Getting Started</a> and <a href="./client.html">Python Client</a></li><li><strong>Issues</strong>: Report bugs at <a href="https://github.com/tacofoundation/tacozip/issues" target="_blank" rel="noreferrer">GitHub Issues</a></li><li><strong>Discussions</strong>: Ask questions at <a href="https://github.com/tacofoundation/tacozip/discussions" target="_blank" rel="noreferrer">GitHub Discussions</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/tacofoundation/tacozip/main/docs/en/python/faq.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page on GitHub<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/tacozip/en/python/use-cases.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Use cases</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/tacozip/en/python/CHANGELOG.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Changelog</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>© 2025 tacozip | open source for a better tomorrow</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_python_changelog.md\":\"BIHBLrJ9\",\"en_python_client.md\":\"DkfDe6Vs\",\"en_python_contributing.md\":\"Bj6K5UY0\",\"en_python_create.md\":\"ulftB_oG\",\"en_python_faq.md\":\"BJTaFUXI\",\"en_python_getting-started.md\":\"CuDsthp5\",\"en_python_header.md\":\"6pI8a10q\",\"en_python_overview.md\":\"DjCdGvsS\",\"en_python_python-api-reference.md\":\"21D3qSMu\",\"en_python_use-cases.md\":\"DZ78JN-P\",\"en_python_validation.md\":\"DRD-HLUq\",\"en_specification_best-practices.md\":\"C-nmFPiO\",\"en_specification_cog.md\":\"phwhNP8_\",\"en_specification_gdal-geotiff.md\":\"D1xuItvj\",\"en_specification_geotiff.md\":\"CBNYPNEV\",\"en_specification_multidimensional-geotiff-specification.md\":\"CFKfWTze\",\"en_specification_multidimensional-geotiff.md\":\"D8dDDjWm\",\"en_specification_other-functions.md\":\"D1BNrl_o\",\"en_specification_specification.md\":\"DoP3BHMx\",\"en_specification_summary.md\":\"D1RZsCiv\",\"en_specification_temporal-geotiff-specification.md\":\"5M28mLLG\",\"en_specification_temporal-geotiff.md\":\"BoGMPAc9\",\"index.md\":\"B9MlRG9b\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"tacozip\",\"description\":\"A VitePress site\",\"base\":\"/tacozip/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Python\",\"link\":\"/en/python/overview/\",\"activeMatch\":\"/en/python/\"},{\"text\":\"R\",\"link\":\"#\"},{\"text\":\"Julia\",\"link\":\"#\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/en/python/\":{\"base\":\"/en/python/\",\"items\":[{\"text\":\"API Reference\",\"items\":[{\"text\":\"Overview\",\"link\":\"overview\"},{\"text\":\"Getting started\",\"link\":\"getting-started\"},{\"text\":\"TACO header\",\"link\":\"header\"},{\"text\":\"Python client\",\"link\":\"client\"},{\"text\":\"Python API\",\"link\":\"python-api-reference\"},{\"text\":\"Use cases\",\"link\":\"use-cases\"},{\"text\":\"FAQ\",\"link\":\"faq\"}]},{\"items\":[{\"text\":\"Changelog\",\"link\":\"CHANGELOG.md\"},{\"text\":\"Contributing\",\"link\":\"CONTRIBUTING.md\"}]}]}},\"editLink\":{\"pattern\":\"https://github.com/tacofoundation/tacozip/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/tacofoundation/tacozip\"},{\"icon\":\"twitter\",\"link\":\"https://x.com/isp_uv_es\"},{\"icon\":{\"svg\":\"\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z\\\"/></svg>\"},\"link\":\"mailto:csaybar@gamil.com\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"© 2025 tacozip | open source for a better tomorrow\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>